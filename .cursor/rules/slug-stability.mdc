description: "Slug stability: one function only; forbid ad-hoc slug code."
globs:
  - "src/**/*"
alwaysApply: true

hardConstraints:
  - "All slug generation MUST call src/lib/markdown/slug.ts::toSlug."
  - "Do not inline regex-based slug logic anywhere else."
  - "If slug behavior changes, update slug.test.ts and note a migration strategy for any persisted slugs."

verificationChecklist:
  - "Search repo for .replace(/[^a-z0-9]/-style patterns; replace with toSlug()."
  - "Run slug tests and ensure no changes in expected snapshots."
