# Pre-commit Setup and CI Prevention Guide

## What was fixed
- ESLint warning about unused variable `safeRelationships` in `/src/app/claim/[slug]/page.tsx`
- Added strict linting (`--max-warnings 0`) to fail on any ESLint warnings
- Set up Husky pre-commit hooks to catch issues before they reach CI

## Scripts Available

- `npm run lint` - Regular linting (allows warnings)
- `npm run lint:strict` - Strict linting (fails on warnings)
- `npm run pre-commit` - Type check + strict lint + tests
- `npm run ci` - Full CI simulation (type check + strict lint + tests + build)
- `npm run pre-push` - Runs the full CI simulation

## Pre-commit Hooks

The following hooks are now active:
- **Pre-commit**: Runs type checking, strict linting, and tests
- **Pre-push**: Runs the full CI simulation including build

## How to Use

1. **Before committing**: The pre-commit hook will automatically run and prevent commits if there are any type errors, linting warnings, or test failures.

2. **Manual validation**: Run `npm run ci` to simulate the exact CI process locally.

3. **Fix issues quickly**: 
   - `npm run lint:fix` - Auto-fix linting issues
   - `npm run type-check` - Check TypeScript errors
   - `npm run test` - Run tests

## Common Issues Prevented

1. **ESLint warnings** - Now treated as errors in CI
2. **TypeScript compilation errors**
3. **Test failures**
4. **Build failures**

## If CI Still Fails

1. Run `npm run ci` locally to reproduce
2. Check the exact error message
3. Fix the root cause
4. Commit the fix

The pre-commit hooks should now catch 99% of CI failures before they happen!
